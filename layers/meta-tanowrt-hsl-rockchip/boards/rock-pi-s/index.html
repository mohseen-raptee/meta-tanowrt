<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3 Radxa ROCK Pi S &mdash; TanoWrt Embedded Linux Distibution master documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/tabs.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="3.9.1 ROCK Pi S U-Boot Boot Log" href="bootlog-u-boot.html" />
    <link rel="prev" title="2.9.3 Boardcon EM3568 System Boot Log" href="../boardcon-em3568/bootlog-system.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html" class="icon icon-home"> TanoWrt Embedded Linux Distibution
          </a>
              <div class="version">
                master
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../meta-tanowrt/index.html">TanoWrt Core Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../build-kas.html">Building TanoWrt with kas</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware Support Layers</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Rockchip SoC's</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../index.html#requirements-and-dependencies">Requirements and Dependencies</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html#supported-boards">Supported Boards</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../boardcon-em3566/index.html">1 Boardcon EM3566 SBC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../boardcon-em3568/index.html">2 Boardcon EM3568 SBC</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">3 Radxa ROCK Pi S</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#board-overview">3.1 Board Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#supported-build-targets">3.2 Supported Build Targets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#supported-images">3.3 Supported Images</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build">3.4 Build</a></li>
<li class="toctree-l4"><a class="reference internal" href="#produced-build-artifacts">3.5 Produced Build Artifacts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#flash-images">3.6 Flash Images</a></li>
<li class="toctree-l4"><a class="reference internal" href="#booting-and-running">3.7 Booting and Running</a></li>
<li class="toctree-l4"><a class="reference internal" href="#upgrade-running-system">3.8 Upgrade Running System</a></li>
<li class="toctree-l4"><a class="reference internal" href="#additional-information">3.9 Additional Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="#references">3.10 References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#license">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#maintainers">Maintainers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#references">References</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">TanoWrt Embedded Linux Distibution</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
    <li>
      <a href="../../../../index.html" class="icon icon-home"> TanoWrt</a> &raquo;
    </li>
    
      <li><a href="../../index.html">Rockchip SoC’s Hardware Support Layer (meta-tanowrt-hsl-rockchip)</a> &raquo;</li>
    
    <li><span class="section-number">3 </span>Radxa ROCK Pi S</li>

      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/layers/meta-tanowrt-hsl-rockchip/boards/rock-pi-s/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="radxa-rock-pi-s">
<span id="device-rock-pi-s"></span><h1><span class="section-number">3 </span>Radxa ROCK Pi S<a class="headerlink" href="#radxa-rock-pi-s" title="Permalink to this heading"></a></h1>
<section id="board-overview">
<span id="sec-rock-pi-s-board"></span><h2><span class="section-number">3.1 </span>Board Overview<a class="headerlink" href="#board-overview" title="Permalink to this heading"></a></h2>
<p>ROCK Pi S is a Rockchip RK3308 based SBC (Single Board Computer) by Radxa.
It equips a 64 bits quad-core processor, USB, ethernet, wireless connectivity
and voice detection engine at the size of 1.7 inch, make it perfect for IoT
and voice applications. ROCK Pi S comes in two RAxM sizes 256 MiB or 512 MiB DDR3,
and uses microSD card for OS and storage. Optionally, ROCK Pi S can provide
on board storage version with 1/2/4/8 GiB NAND flash.</p>
<figure class="align-default" id="id1">
<span id="fig-rock-pi-s-angle"></span><a class="with-border reference internal image-reference" href="../../../../_images/rock-pi-s-angle.jpeg"><img alt="../../../../_images/rock-pi-s-angle.jpeg" class="with-border" src="../../../../_images/rock-pi-s-angle.jpeg" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.1 </span><span class="caption-text">ROCK Pi S front with an angle view</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id2">
<span id="fig-rock-pi-s-top"></span><a class="with-border reference internal image-reference" href="../../../../_images/rock-pi-s-top.jpeg"><img alt="../../../../_images/rock-pi-s-top.jpeg" class="with-border" src="../../../../_images/rock-pi-s-top.jpeg" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.2 </span><span class="caption-text">ROCK Pi S top view</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id3">
<span id="fig-rock-pi-s-back"></span><a class="with-border reference internal image-reference" href="../../../../_images/rock-pi-s-back.jpeg"><img alt="../../../../_images/rock-pi-s-back.jpeg" class="with-border" src="../../../../_images/rock-pi-s-back.jpeg" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.3 </span><span class="caption-text">ROCK Pi S back view</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<section id="features">
<h3><span class="section-number">3.1.1 </span>Features<a class="headerlink" href="#features" title="Permalink to this heading"></a></h3>
<table class="docutils align-default" id="id4">
<caption><span class="caption-number">Table 3.1 </span><span class="caption-text">ROCK Pi S Features</span><a class="headerlink" href="#id4" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 16%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Model</p></th>
<th class="head"><p>ROCK Pi S</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Processor</p></td>
<td><div class="line-block">
<div class="line">SoC Rockchip RK3308</div>
<div class="line">Quad Cortex-A35 ARM 64 bits processor</div>
<div class="line">frequency up to 1.3 GHz</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Memory</p></td>
<td><p>256 MiB or 512 MiB DDR3</p></td>
</tr>
<tr class="row-even"><td><p>Storage</p></td>
<td><div class="line-block">
<div class="line">microSD(TF)</div>
<div class="line">optional on board 1/2/4/8 GiB NAND flash</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Wireless</p></td>
<td><div class="line-block">
<div class="line">802.11 b/g/n WiFi</div>
<div class="line">Bluetooth 4.0 (RTL8723DS)</div>
<div class="line">External antenna</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>USB</p></td>
<td><div class="line-block">
<div class="line">1 × USB 2.0 Type-A HOST</div>
<div class="line">1 × USB 3.0 Type-C OTG</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Keys</p></td>
<td><div class="line-block">
<div class="line">1 × Maskrom</div>
<div class="line">1 × Reset</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Ethernet</p></td>
<td><p>100 Mbit/s Ethernet, optional PoE (additional HAT requried)</p></td>
</tr>
<tr class="row-odd"><td><p>IO</p></td>
<td><div class="line-block">
<div class="line">26-pin expansion header</div>
<div class="line">4 × I2C</div>
<div class="line">3 × PWM</div>
<div class="line">2 × SPI</div>
<div class="line">3 × UART</div>
<div class="line">1 × I2S</div>
<div class="line">2 × 5V DC power in</div>
<div class="line">2 × 3.3 DC power in</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Power</p></td>
<td><p>USB Type-C DC 5V</p></td>
</tr>
<tr class="row-odd"><td><p>Dimensions</p></td>
<td><p>43.18 mm × 43.18 mm (1.7 inch square)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="hardware-models">
<h3><span class="section-number">3.1.2 </span>Hardware Models<a class="headerlink" href="#hardware-models" title="Permalink to this heading"></a></h3>
<p>ROCK Pi S board comes with different versions. Not all versions are supported and tested with TanoWrt.</p>
<table class="docutils align-default" id="id5">
<caption><span class="caption-number">Table 3.2 </span><span class="caption-text">ROCK Pi S Hardware Models</span><a class="headerlink" href="#id5" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 15%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 43%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>SKU</p></th>
<th class="head"><p>RAM</p></th>
<th class="head"><p>SD NAND</p></th>
<th class="head"><p>WiFi/BT</p></th>
<th class="head"><p>PoE</p></th>
<th class="head"><p>TanoWrt Support</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>RS308-D2</p></td>
<td><p>256 MiB</p></td>
<td><p>–</p></td>
<td><p>–</p></td>
<td><p>–</p></td>
<td><p>Yes (not tested)</p></td>
</tr>
<tr class="row-odd"><td><p>RS308-D4</p></td>
<td><p>512 MiB</p></td>
<td><p>–</p></td>
<td><p>–</p></td>
<td><p>–</p></td>
<td><p>Yes (not tested)</p></td>
</tr>
<tr class="row-even"><td><p>RS308-D4W</p></td>
<td><p>512 MiB</p></td>
<td><p>–</p></td>
<td><p>RTL8723DS</p></td>
<td><p>–</p></td>
<td><p>Yes (not tested)</p></td>
</tr>
<tr class="row-odd"><td><p>RS308-D4WP</p></td>
<td><p>512 MiB</p></td>
<td><p>–</p></td>
<td><p>RTL8723DS</p></td>
<td><p>Supported</p></td>
<td><p>Yes (not tested)</p></td>
</tr>
<tr class="row-even"><td><p>RS308-D4WPN8</p></td>
<td><p>512 MiB</p></td>
<td><p>1 GiB</p></td>
<td><p>RTL8723DS</p></td>
<td><p>Supported</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>RS308-D4WPN64</p></td>
<td><p>512 MiB</p></td>
<td><p>8 GiB</p></td>
<td><p>RTL8723DS</p></td>
<td><p>Supported</p></td>
<td><p>Yes (not tested)</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="supported-build-targets">
<span id="sec-rock-pi-s-targets"></span><h2><span class="section-number">3.2 </span>Supported Build Targets<a class="headerlink" href="#supported-build-targets" title="Permalink to this heading"></a></h2>
<span id="table-rock-pi-s-supported-targets"></span><table class="docutils align-default" id="id6">
<caption><span class="caption-number">Table 3.3 </span><span class="caption-text">Supported Build Targets</span><a class="headerlink" href="#id6" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 29%" />
<col style="width: 17%" />
<col style="width: 19%" />
<col style="width: 16%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Target File (<code class="docutils literal notranslate"><span class="pre">&lt;target-yml-file&gt;</span></code>)</p></th>
<th class="head"><p>Machine</p></th>
<th class="head"><p>Running Media</p></th>
<th class="head"><p>Installation Media</p></th>
<th class="head"><p>Root Filesystem Image</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rock-pi-s-sd.yml</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rock-pi-s-sd</span></code></p></td>
<td><p>microSD card</p></td>
<td><p>–</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">tanowrt-image-full</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rock-pi-s-sdnand.yml</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rock-pi-s-sdnand</span></code></p></td>
<td><p>internal SD NAND flash</p></td>
<td><p>microSD card</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">tanowrt-image-full</span></code></p></td>
</tr>
</tbody>
</table>
<p>Short explanations for the table columns:</p>
<ul class="simple">
<li><p>Target: target YML-file located in <code class="docutils literal notranslate"><span class="pre">kas/targets</span></code> directory.</p></li>
<li><p>Machine: target machine name stored in the <code class="docutils literal notranslate"><span class="pre">MACHINE</span></code> BitBake variable.</p></li>
<li><p>Running Media: external or internal data storage where the TanoWrt operating system is running.</p></li>
<li><p>Installation Media: external storage device for which an installation image is generated. When booting from
the Installation Media, the TanoWrt system is installed on the Running Media storage.</p></li>
<li><p>Root Filesystem Image: root file system image recipe name (see <a class="reference internal" href="#sec-rock-pi-s-images"><span class="std std-ref">Supported Images</span></a> to see supported images).</p></li>
</ul>
</section>
<section id="supported-images">
<span id="sec-rock-pi-s-images"></span><h2><span class="section-number">3.3 </span>Supported Images<a class="headerlink" href="#supported-images" title="Permalink to this heading"></a></h2>
<p>Supported root filesystem images are listed in the Table
<a class="reference internal" href="#table-rock-pi-s-supported-images"><span class="std std-ref">Supported Images</span></a>.</p>
<span id="table-rock-pi-s-supported-images"></span><table class="docutils align-default" id="id7">
<caption><span class="caption-number">Table 3.4 </span><span class="caption-text">Supported Images</span><a class="headerlink" href="#id7" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 43%" />
<col style="width: 27%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Image Recipe (<code class="docutils literal notranslate"><span class="pre">&lt;image-recipe&gt;</span></code>)</p></th>
<th class="head"><p>Supported Target(s)</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tanowrt-image-full</span></code></p></td>
<td><p><em>All</em></p></td>
<td><p>Standard TanoWrt image</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tanowrt-image-minimal</span></code></p></td>
<td><p><em>All</em></p></td>
<td><p>Minimal TanoWrt image</p></td>
</tr>
</tbody>
</table>
</section>
<section id="build">
<span id="sec-rock-pi-s-build"></span><h2><span class="section-number">3.4 </span>Build<a class="headerlink" href="#build" title="Permalink to this heading"></a></h2>
<section id="install-required-packages">
<h3><span class="section-number">3.4.1 </span>Install Required Packages<a class="headerlink" href="#install-required-packages" title="Permalink to this heading"></a></h3>
<p>For a successful build, additional packages must be installed.
To do this, run the command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>sudo apt-get install gawk wget git-core diffstat unzip texinfo gcc-multilib <span class="se">\</span>
       build-essential chrpath socat cpio python python3 python3-pip python3-pexpect <span class="se">\</span>
       xz-utils debianutils iputils-ping file
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using Ubuntu, you will need to configure the default system shell
command interpreter for shell scripts to bash. You can do it with the command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>sudo dpkg-reconfigure dash
</pre></div>
</div>
<p>Select <cite>No</cite> when it asks you to install dash as <cite>/bin/sh</cite>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The recommended Linux distribution on host system
is Ubuntu 20.04 or higher.</p>
</div>
</section>
<section id="install-kas">
<h3><span class="section-number">3.4.2 </span>Install kas<a class="headerlink" href="#install-kas" title="Permalink to this heading"></a></h3>
<p>To install kas into your python site-package repository, run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip3 install <span class="nv">kas</span><span class="o">==</span><span class="m">2</span>.6.3
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Required kas version 2.6.3.</p>
</div>
<p>See <a class="reference external" href="https://kas.readthedocs.io/en/latest/userguide.html#dependencies-installation">official kas documentation</a> for more details</p>
</section>
<section id="clone-tanowrt-repository">
<h3><span class="section-number">3.4.3 </span>Clone TanoWrt Repository<a class="headerlink" href="#clone-tanowrt-repository" title="Permalink to this heading"></a></h3>
<p>Clone TanoWrt core layer repository to your home directory (this document uses <code class="docutils literal notranslate"><span class="pre">~/tanowrt</span></code> for example):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span> ~
<span class="gp">$ </span>git clone https://github.com/tano-systems/meta-tanowrt tanowrt
</pre></div>
</div>
</section>
<section id="initialize-and-update-submodules">
<h3><span class="section-number">3.4.4 </span>Initialize and Update Submodules<a class="headerlink" href="#initialize-and-update-submodules" title="Permalink to this heading"></a></h3>
<p>When using the kas utility, it is required to have BitBake at the root
of the meta-tanowrt layer. The BitBake submodule must be initialized
and updated before building:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span> ~/tanowrt
<span class="gp">$ </span>git submodule update --init
</pre></div>
</div>
</section>
<section id="build-tanowrt">
<h3><span class="section-number">3.4.5 </span>Build TanoWrt<a class="headerlink" href="#build-tanowrt" title="Permalink to this heading"></a></h3>
<p>To build TanoWrt images, you have to run the <code class="docutils literal notranslate"><span class="pre">kas</span> <span class="pre">build</span></code> command with the
path to the target YML-file as an argument.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span><span class="nb">cd</span> ~/tanowrt
<span class="gp"># </span>kas build kas/targets/&lt;target-yml-file&gt;
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you see <code class="docutils literal notranslate"><span class="pre">Command</span> <span class="pre">'kas'</span> <span class="pre">not</span> <span class="pre">found</span></code> just add <code class="docutils literal notranslate"><span class="pre">~/.local/bin</span></code> to your <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>,
for example by adding the following line to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export PATH=&quot;$HOME/.local/bin:$PATH&quot;</span>
</pre></div>
</div>
<p>After that, restart your shell and things should work as expected.</p>
</div>
<p>By default, unless otherwise specified, a root file system image specified
in the target configuration is built. The default root filesystem image
recipe name for each supported target can be found in Table
<a class="reference internal" href="#table-rock-pi-s-supported-targets"><span class="std std-ref">Supported Build Targets</span></a> (Root Filesystem Image column).
If you need to build a different image for the target, the following build
command should be used:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>kas build --target &lt;image-recipe&gt; kas/targets/&lt;target-yml-file&gt;
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>See <a class="reference internal" href="#sec-rock-pi-s-targets"><span class="std std-ref">Supported Build Targets</span></a> section to select the required target file.</p></li>
<li><p>See <a class="reference internal" href="#sec-rock-pi-s-images"><span class="std std-ref">Supported Images</span></a> section to select the required root filesystem image recipe.</p></li>
<li><p>See <a class="reference internal" href="#sec-rock-pi-s-artifacts"><span class="std std-ref">Produced Build Artifacts</span></a> section for detailed information
about the produced build artifacts.</p></li>
</ul>
</div>
</section>
</section>
<section id="produced-build-artifacts">
<span id="sec-rock-pi-s-artifacts"></span><h2><span class="section-number">3.5 </span>Produced Build Artifacts<a class="headerlink" href="#produced-build-artifacts" title="Permalink to this heading"></a></h2>
<p>All produced build artifacts are stored in the <code class="docutils literal notranslate"><span class="pre">~/tanowrt/build/tanowrt-glibc/deploy/images/&lt;MACHINE&gt;</span></code> directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;MACHINE&gt;</span></code> in the artifacts path is replaced by the actual value of the
<code class="docutils literal notranslate"><span class="pre">MACHINE</span></code> BitBake variable for the chosen <a class="reference internal" href="#sec-rock-pi-s-targets">target</a>.</p>
</div>
<p>Refer to table <a class="reference internal" href="#table-rock-pi-s-artifacts"><span class="std std-ref">Produced Build Artifacts</span></a> for a description of some common (not all) build artifacts.</p>
<span id="table-rock-pi-s-artifacts"></span><table class="docutils align-default" id="id8">
<caption><span class="caption-number">Table 3.5 </span><span class="caption-text">Produced Build Artifacts</span><a class="headerlink" href="#id8" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 38%" />
<col style="width: 21%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Artifact</p></th>
<th class="head"><p>Target(s)</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">startup-&lt;MACHINE&gt;.img</span></code></p></td>
<td><p><em>All</em></p></td>
<td><p>U-Boot startup script.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">startup-factory-&lt;MACHINE&gt;.img</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rock-pi-s-sdnand.yml</span></code></p></td>
<td><p>U-Boot startup script for factory installation image.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">idblock.img-&lt;MACHINE&gt;-sdcard</span></code></p></td>
<td><p><em>All</em></p></td>
<td><p>Rockchip IDBLOCK image for booting from SD card.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">idblock.img-&lt;MACHINE&gt;-sdnand</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rock-pi-s-sdnand.yml</span></code></p></td>
<td><p>Rockchip IDBLOCK image for booting from internal SD NAND.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">u-boot-initial-env-&lt;MACHINE&gt;-sdcard</span></code></p></td>
<td><p><em>All</em></p></td>
<td><p>U-Boot initial environment image for SD card image.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">u-boot-initial-env-&lt;MACHINE&gt;-sdnand</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rock-pi-s-sdnand.yml</span></code></p></td>
<td><p>U-Boot initial environment image for internal SD NAND image.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fitImage-&lt;MACHINE&gt;.bin</span></code></p></td>
<td><p><em>All</em></p></td>
<td><p>Flattened Image Tree (FIT) image with Linux kernel
and Device Tree Blobs (DTB).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fitImage-&lt;MACHINE&gt;.ext4</span></code></p></td>
<td><p><em>All</em></p></td>
<td><p>FIT image packed into an ext4 file system image.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rk3308-rock-pi-s-&lt;MACHINE&gt;.dtb</span></code></p></td>
<td><p><em>All</em></p></td>
<td><p>Target Device Tree Blob (DTB).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;image-recipe&gt;-&lt;MACHINE&gt;.sdcard.img</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rock-pi-s-sd.yml</span></code></p></td>
<td><p>SD card image including all required partitions for booting
and running the system. This image is ready to be written
to the SD card using the dd utility or similar
(see <a class="reference internal" href="#sec-rock-pi-s-flash"><span class="std std-ref">Flash Images</span></a>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;image-recipe&gt;-swu-factory-&lt;MACHINE&gt;.sdcard.img</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rock-pi-s-sdnand.yml</span></code></p></td>
<td><p>SD card factory installation image. This image is ready
to be written to the SD card using the dd utility or similar
(see <a class="reference internal" href="#sec-rock-pi-s-flash"><span class="std std-ref">Flash Images</span></a>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;image-recipe&gt;-&lt;MACHINE&gt;.squashfs-lzo</span></code></p></td>
<td><p><em>All</em></p></td>
<td><p>Root filesystem image (squashfs with LZO compression).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;image-recipe&gt;-swu-&lt;MACHINE&gt;.swu</span></code></p></td>
<td><p><em>All</em></p></td>
<td><p>SWUpdate image for updating system
(see <a class="reference internal" href="#sec-rock-pi-s-upgrade"><span class="std std-ref">Upgrade Running System</span></a>).</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;MACHINE&gt;</span></code> in the artifact name is replaced by the actual value of the
<code class="docutils literal notranslate"><span class="pre">MACHINE</span></code> BitBake variable for the chosen <a class="reference internal" href="#sec-rock-pi-s-targets">target</a>.
<code class="docutils literal notranslate"><span class="pre">&lt;image-recipe&gt;</span></code> is replaced by the actual <a class="reference internal" href="#sec-rock-pi-s-images">image recipe</a> name.</p>
</div>
<p>For example, below is the complete list of artifacts produced by the
<code class="docutils literal notranslate"><span class="pre">rock-pi-s-sd.yml</span></code> target build.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[~/tanowrt/build/tanowrt-glibc/deploy/images/rock-pi-s-sd]$ </span>ls -gGh
<span class="go">total 184M</span>
<span class="go">lrwxrwxrwx 2   84 Jun  7 06:29 fitImage -&gt; fitImage--4.19.219+git0+40b753b965-tano1.2.20.20.1.0-rock-pi-s-sd-20220607032704.bin</span>
<span class="go">-rw-r--r-- 2 3.7M Jun  7 06:29 fitImage--4.19.219+git0+40b753b965-tano1.2.20.20.1.0-rock-pi-s-sd-20220607032704.bin</span>
<span class="go">-rw-r--r-- 2 5.5M Jun  7 06:29 fitImage-4.19.219+gitAUTOINC+40b753b965-tano1.2.20.20.1.0-rock-pi-s-sd.ext4</span>
<span class="go">-rw-r--r-- 2 1.6K Jun  7 06:29 fitImage-its--4.19.219+git0+40b753b965-tano1.2.20.20.1.0-rock-pi-s-sd-20220607032704.its</span>
<span class="go">lrwxrwxrwx 2   88 Jun  7 06:29 fitImage-its-rock-pi-s-sd -&gt; fitImage-its--4.19.219+git0+40b753b965-tano1.2.20.20.1.0-rock-pi-s-sd-20220607032704.its</span>
<span class="go">-rw-r--r-- 2 3.7M Jun  7 06:29 fitImage-linux.bin--4.19.219+git0+40b753b965-tano1.2.20.20.1.0-rock-pi-s-sd-20220607032704.bin</span>
<span class="go">lrwxrwxrwx 2   94 Jun  7 06:29 fitImage-linux.bin-rock-pi-s-sd -&gt; fitImage-linux.bin--4.19.219+git0+40b753b965-tano1.2.20.20.1.0-rock-pi-s-sd-20220607032704.bin</span>
<span class="go">lrwxrwxrwx 2   84 Jun  7 06:29 fitImage-rock-pi-s-sd.bin -&gt; fitImage--4.19.219+git0+40b753b965-tano1.2.20.20.1.0-rock-pi-s-sd-20220607032704.bin</span>
<span class="go">-rw-r--r-- 2 5.5M Jun  7 06:29 fitImage-rock-pi-s-sd.ext4</span>
<span class="go">lrwxrwxrwx 2   72 Jun  7 05:55 idblock.img-rock-pi-s-sd-sdcard -&gt; idblock.img-rock-pi-s-sd-sdcard-2017.09+gitAUTOINC+e3ca3c3805_fe66a9be19</span>
<span class="go">-rwxr-xr-x 2 110K Jun  7 05:55 idblock.img-rock-pi-s-sd-sdcard-2017.09+gitAUTOINC+e3ca3c3805_fe66a9be19</span>
<span class="go">lrwxrwxrwx 2   71 Jun  7 05:55 loader.bin-rock-pi-s-sd-sdcard -&gt; loader.bin-rock-pi-s-sd-sdcard-2017.09+gitAUTOINC+e3ca3c3805_fe66a9be19</span>
<span class="go">-rwxr-xr-x 2 237K Jun  7 05:55 loader.bin-rock-pi-s-sd-sdcard-2017.09+gitAUTOINC+e3ca3c3805_fe66a9be19</span>
<span class="go">-rw-r--r-- 2  41M Jun  7 06:29 modules--4.19.219+git0+40b753b965-tano1.2.20.20.1.0-rock-pi-s-sd-20220607032704.tgz</span>
<span class="go">lrwxrwxrwx 2   83 Jun  7 06:29 modules-rock-pi-s-sd.tgz -&gt; modules--4.19.219+git0+40b753b965-tano1.2.20.20.1.0-rock-pi-s-sd-20220607032704.tgz</span>
<span class="go">-rw-r--r-- 2  63K Jun  7 06:29 rk3308-rock-pi-s--4.19.219+git0+40b753b965-tano1.2.20.20.1.0-rock-pi-s-sd-20220607032704.dtb</span>
<span class="go">lrwxrwxrwx 2   92 Jun  7 06:29 rk3308-rock-pi-s.dtb -&gt; rk3308-rock-pi-s--4.19.219+git0+40b753b965-tano1.2.20.20.1.0-rock-pi-s-sd-20220607032704.dtb</span>
<span class="go">lrwxrwxrwx 2   92 Jun  7 06:29 rk3308-rock-pi-s-rock-pi-s-sd.dtb -&gt; rk3308-rock-pi-s--4.19.219+git0+40b753b965-tano1.2.20.20.1.0-rock-pi-s-sd-20220607032704.dtb</span>
<span class="go">-rw-r--r-- 2 2.2K Jun  7 11:40 startup.img</span>
<span class="go">-rw-r--r-- 2   16 Jun  7 11:40 startup.img.version</span>
<span class="go">lrwxrwxrwx 2   11 Jun  7 11:40 startup-rock-pi-s-sd.img -&gt; startup.img</span>
<span class="go">lrwxrwxrwx 2   19 Jun  7 11:40 startup-rock-pi-s-sd.img.version -&gt; startup.img.version</span>
<span class="go">-rw-r--r-- 2 5.1K Jun  7 12:02 tanowrt-image-full.env</span>
<span class="go">-rw-r--r-- 2  53K Jun  7 12:02 tanowrt-image-full-rock-pi-s-sd-20220607090114.rootfs.manifest</span>
<span class="go">-rw-r--r-- 2 945M Jun  7 12:03 tanowrt-image-full-rock-pi-s-sd-20220607090114.rootfs.sdcard.img</span>
<span class="go">-rw-r--r-- 2  26M Jun  7 12:02 tanowrt-image-full-rock-pi-s-sd-20220607090114.rootfs.squashfs-lzo</span>
<span class="go">-rw-r--r-- 2   24 Jun  7 12:03 tanowrt-image-full-rock-pi-s-sd-20220607090114.rootfs.version</span>
<span class="go">-rw-r--r-- 2 362K Jun  7 12:02 tanowrt-image-full-rock-pi-s-sd-20220607090114.testdata.json</span>
<span class="go">lrwxrwxrwx 2   62 Jun  7 12:02 tanowrt-image-full-rock-pi-s-sd.manifest -&gt; tanowrt-image-full-rock-pi-s-sd-20220607090114.rootfs.manifest</span>
<span class="go">lrwxrwxrwx 2   64 Jun  7 12:03 tanowrt-image-full-rock-pi-s-sd.sdcard.img -&gt; tanowrt-image-full-rock-pi-s-sd-20220607090114.rootfs.sdcard.img</span>
<span class="go">lrwxrwxrwx 2   66 Jun  7 12:02 tanowrt-image-full-rock-pi-s-sd.squashfs-lzo -&gt; tanowrt-image-full-rock-pi-s-sd-20220607090114.rootfs.squashfs-lzo</span>
<span class="go">lrwxrwxrwx 2   60 Jun  7 12:02 tanowrt-image-full-rock-pi-s-sd.testdata.json -&gt; tanowrt-image-full-rock-pi-s-sd-20220607090114.testdata.json</span>
<span class="go">lrwxrwxrwx 2   61 Jun  7 12:03 tanowrt-image-full-rock-pi-s-sd.version -&gt; tanowrt-image-full-rock-pi-s-sd-20220607090114.rootfs.version</span>
<span class="go">-rw-r--r-- 2 2.2K Jun  7 12:02 tanowrt-image-full-sdimage-rockchip-swu-a-b.wks</span>
<span class="go">-rw-r--r-- 2  34M Jun  7 12:03 tanowrt-image-full-swu-rock-pi-s-sd-20220607090114.swu</span>
<span class="go">lrwxrwxrwx 2   54 Jun  7 12:03 tanowrt-image-full-swu-rock-pi-s-sd.swu -&gt; tanowrt-image-full-swu-rock-pi-s-sd-20220607090114.swu</span>
<span class="go">lrwxrwxrwx 2   85 Jun  7 05:55 u-boot-initial-env-rock-pi-s-sd-sdcard -&gt; u-boot-initial-env-rock-pi-s-sd-sdcard-2017.09+gitAUTOINC+e3ca3c3805_fe66a9be19-tano7</span>
<span class="go">-rw-r--r-- 2  459 Jun  7 05:55 u-boot-initial-env-rock-pi-s-sd-sdcard-2017.09+gitAUTOINC+e3ca3c3805_fe66a9be19-tano7</span>
<span class="go">-rw-r--r-- 2  32K Jun  7 05:55 u-boot-initial-env-rock-pi-s-sd-sdcard-2017.09+gitAUTOINC+e3ca3c3805_fe66a9be19-tano7.bin</span>
<span class="go">lrwxrwxrwx 2   89 Jun  7 05:55 u-boot-initial-env-rock-pi-s-sd-sdcard.bin -&gt; u-boot-initial-env-rock-pi-s-sd-sdcard-2017.09+gitAUTOINC+e3ca3c3805_fe66a9be19-tano7.bin</span>
<span class="go">lrwxrwxrwx 2   85 Jun  7 05:55 u-boot-initial-env-sdcard -&gt; u-boot-initial-env-rock-pi-s-sd-sdcard-2017.09+gitAUTOINC+e3ca3c3805_fe66a9be19-tano7</span>
<span class="go">lrwxrwxrwx 2   89 Jun  7 05:55 u-boot-initial-env-sdcard.bin -&gt; u-boot-initial-env-rock-pi-s-sd-sdcard-2017.09+gitAUTOINC+e3ca3c3805_fe66a9be19-tano7.bin</span>
<span class="go">lrwxrwxrwx 2   64 Jun  7 05:55 u-boot-rock-pi-s-sd.bin -&gt; u-boot-sdcard-2017.09+gitAUTOINC+e3ca3c3805_fe66a9be19-tano7.bin</span>
<span class="go">lrwxrwxrwx 2   64 Jun  7 05:55 u-boot-rock-pi-s-sd.bin-sdcard -&gt; u-boot-sdcard-2017.09+gitAUTOINC+e3ca3c3805_fe66a9be19-tano7.bin</span>
<span class="go">-rw-r--r-- 2 2.0M Jun  7 05:55 u-boot-sdcard-2017.09+gitAUTOINC+e3ca3c3805_fe66a9be19-tano7.bin</span>
</pre></div>
</div>
</section>
<section id="flash-images">
<span id="sec-rock-pi-s-flash"></span><h2><span class="section-number">3.6 </span>Flash Images<a class="headerlink" href="#flash-images" title="Permalink to this heading"></a></h2>
<section id="flash-image-to-microsd-card">
<span id="sec-rock-pi-s-flash-sd"></span><h3><span class="section-number">3.6.1 </span>Flash Image to microSD Card<a class="headerlink" href="#flash-image-to-microsd-card" title="Permalink to this heading"></a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">dd</span></code> utility to write the generated <code class="docutils literal notranslate"><span class="pre">.sdcard.img</span></code> images to the SD card.
This can be an SD card image intended for booting and running the system from
an SD card (<code class="docutils literal notranslate"><span class="pre">&lt;image-recipe&gt;-&lt;MACHINE&gt;.sdcard.img</span></code>) or a factory installation
image (<code class="docutils literal notranslate"><span class="pre">&lt;image-recipe&gt;-swu-factory-&lt;MACHINE&gt;.sdcard.img</span></code>).
See <a class="reference internal" href="#sec-rock-pi-s-artifacts"><span class="std std-ref">Produced Build Artifacts</span></a> for details.</p>
<p>For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo dd <span class="k">if</span><span class="o">=</span>~/tanowrt/build/tanowrt-glibc/deploy/images/rock-pi-s-sd/tanowrt-image-full-rock-pi-s-sd.sdcard.img <span class="se">\</span>
          <span class="nv">of</span><span class="o">=</span>/dev/mmcblk1 <span class="se">\</span>
          <span class="nv">bs</span><span class="o">=</span>1k
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">/dev/mmcblk1</span></code> is the device name of the SD card.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For writing SD card under Windows we recommend to use
<a class="reference external" href="https://www.osforensics.com/tools/write-usb-images.html">PassMark imageUSB utility</a>.</p>
</div>
</section>
<section id="flash-image-to-sd-nand-flash">
<span id="sec-rock-pi-s-flash-sdnand"></span><h3><span class="section-number">3.6.2 </span>Flash Image to SD NAND Flash<a class="headerlink" href="#flash-image-to-sd-nand-flash" title="Permalink to this heading"></a></h3>
<p>For the initial flashing of the internal SD NAND memory it is recommended to use
the special image of the initial factory installation. If you choose a build target
(see <a class="reference internal" href="#sec-rock-pi-s-targets"><span class="std std-ref">Supported Build Targets</span></a> for details) that assumes using the
factory installation image for the initial flashing of the
device, a factory installation image (<code class="docutils literal notranslate"><span class="pre">&lt;image-recipe&gt;-swu-factory-&lt;MACHINE&gt;.sdcard.img</span></code>)
will be automatically generated during the build process
(see <a class="reference internal" href="#sec-rock-pi-s-build"><span class="std std-ref">Build</span></a>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To write the factory installation image to an SD card, follow the instructions
from <a class="reference internal" href="#sec-rock-pi-s-flash-sd"><span class="std std-ref">Flash Image to microSD Card</span></a> section.</p>
</div>
<p>When you boot device from the prepaired SD card with factory installation image the installation
of TanoWrt to the internal SD NAND flash memory will be done automatically. The detailed
installation log is available on the debug UART. After the installation is complete,
the board will shut down automatically. When the device is turned on, the installed system
will be booted from the internal SD NAND flash memory.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Be aware that during the installation all existing data on the internal SD NAND
flash memory will be permanently lost.</p>
</div>
</section>
</section>
<section id="booting-and-running">
<span id="sec-rock-pi-s-booting"></span><h2><span class="section-number">3.7 </span>Booting and Running<a class="headerlink" href="#booting-and-running" title="Permalink to this heading"></a></h2>
<section id="booting-from-sd-card">
<h3><span class="section-number">3.7.1 </span>Booting from SD Card<a class="headerlink" href="#booting-from-sd-card" title="Permalink to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Insert the micro SD card to the board.</p></li>
<li><p>Use a USB Type-C to USB Type-A cable, connect the board to your PC.</p></li>
<li><p>ROCK Pi S will boot, the green power led is on, and after a while, the blue led start blinking.</p></li>
<li><p>(Optional) Use a USB to TTL serial cable to make a connection between
your PC and ROCK Pi S. See <a class="reference internal" href="#sec-rock-pi-s-serial"><span class="std std-ref">Serial Console</span></a> section for details.</p></li>
</ol>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The internal SD NAND flash memory must be empty in order to perform
a boot from the SD card. See <a class="reference internal" href="#sec-rock-pi-s-sdnand-erase"><span class="std std-ref">Erasing Internal SD NAND Flash</span></a>
section for details about erasing internal SD NAND flash.</p>
</div>
</section>
<section id="booting-from-internal-sd-nand-flash">
<h3><span class="section-number">3.7.2 </span>Booting from Internal SD NAND Flash<a class="headerlink" href="#booting-from-internal-sd-nand-flash" title="Permalink to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Use a USB Type-C to USB Type-A cable, connect the board to your PC.</p></li>
<li><p>ROCK Pi S will boot, the green power led is on, and after a while, the blue led start blinking.</p></li>
<li><p>(Optional) Use a USB to TTL serial cable to make a connection between
your PC and ROCK Pi S. See <a class="reference internal" href="#sec-rock-pi-s-serial"><span class="std std-ref">Serial Console</span></a> section for details.</p></li>
</ol>
</section>
<section id="erasing-internal-sd-nand-flash">
<span id="sec-rock-pi-s-sdnand-erase"></span><h3><span class="section-number">3.7.3 </span>Erasing Internal SD NAND Flash<a class="headerlink" href="#erasing-internal-sd-nand-flash" title="Permalink to this heading"></a></h3>
<p>You can erase the internal SD NAND flash memory in the following ways:</p>
<ul class="simple">
<li><p>Linux command line;</p></li>
<li><p>U-Boot command line;</p></li>
<li><p>special utilities and USB connection with PC.</p></li>
</ul>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Linux CLI</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">U-Boot CLI</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">USB Connection with PC</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p class="rubric">Erasing SD NAND Using Linux Command Line</p>
<p>If the device has a bootable Linux system, you can erase the SD NAND
by the following command entered in the Linux terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[root@tanowrt ~]# </span>dd <span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span>/dev/mmcblk0 <span class="nv">bs</span><span class="o">=</span>1k <span class="nv">count</span><span class="o">=</span><span class="m">32768</span>
</pre></div>
</div>
<p>Note that if the Linux distribution flashed on the SD NAND flash memory
is not TanoWrt, the device name of the SD NAND flash memory may be different.
You can usually find out the real device name by analysing the
system boot log by running the command dmesg. For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[root@tanowrt ~]# </span>dmesg <span class="p">|</span> grep mmcblk
<span class="hll"><span class="go">[    0.829147] mmcblk0: mmc0:21c9 XTSDA 990 MiB</span>
</span><span class="hll"><span class="go">[    0.840930]  mmcblk0: p1 p2 p3 p4 p5 p6</span>
</span><span class="go">[    5.025192] mount_root: /dev/mmcblk0p1: p1, rw, start 8388608, size 8388608</span>
<span class="go">[    5.033574] mount_root: /dev/mmcblk0p2: p2, rw, start 16777216, size 50331648</span>
<span class="go">[    5.034476] mount_root: /dev/mmcblk0p3: p3, rw, start 67108864, size 310378496 [rootfs]</span>
<span class="go">[    5.042884] mount_root: /dev/mmcblk0p4: p4, rw, start 377487360, size 50331648</span>
<span class="go">[    5.045888] mount_root: /dev/mmcblk0p5: p5, rw, start 427819008, size 310378496</span>
<span class="go">[    5.054576] mount_root: /dev/mmcblk0p6: p6, rw, start 738197504, size 298844160 [overlay]</span>
<span class="go">[    5.055393] mount_root: root filesystem on the /dev/mmcblk0p3 partition of /dev/mmcblk0 (rw) device</span>
<span class="go">[    5.083521] mount_root: founded suitable overlay partition /dev/mmcblk0p6</span>
<span class="go">[    5.847535] EXT4-fs (mmcblk0p6): recovery complete</span>
<span class="go">[    5.849379] EXT4-fs (mmcblk0p6): mounted filesystem with ordered data mode. Opts: (null)</span>
<span class="go">[    5.892056] EXT4-fs (mmcblk0p6): mounted filesystem with ordered data mode. Opts: (null)</span>
<span class="go">[   13.972921] mmcblk1: mmc1:aaaa SS16G 14.8 GiB</span>
<span class="go">[   13.987047]  mmcblk1: p1 p2</span>
</pre></div>
</div>
<p>This output shows that device <code class="docutils literal notranslate"><span class="pre">/dev/mmcblk0</span></code> is SD NAND flash
memory and device <code class="docutils literal notranslate"><span class="pre">/dev/mmcblk1</span></code> is SD card.</p>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p class="rubric">Erasing SD NAND Using U-Boot Command Line</p>
<p>If the device has a functional U-Boot bootloader, you can erase
SD NAND with the following commands entered at the U-Boot command line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">=&gt; mmc dev 0</span>
<span class="go">switch to partitions #0, OK</span>
<span class="go">mmc0 is current device</span>
<span class="go">=&gt; mmc erase 0 10000</span>

<span class="go">MMC erase: dev # 0, block # 0, count 65536 ... 65536 blocks erased: OK</span>
<span class="go">=&gt;</span>
</pre></div>
</div>
<p>Please note that if the U-Boot bootloader on the SD NAND flash memory
is different from the one built as part of the TanoWrt distribution,
the device number of the SD NAND flash memory may be different from
the one shown above. Use the <code class="docutils literal notranslate"><span class="pre">mmc</span> <span class="pre">dev</span></code>, <code class="docutils literal notranslate"><span class="pre">mmc</span> <span class="pre">list</span></code> and <code class="docutils literal notranslate"><span class="pre">mmc</span> <span class="pre">info</span></code>
commands to identify the valid SD NAND flash memory device number:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">=&gt; mmc dev 0</span>
<span class="go">switch to partitions #0, OK</span>
<span class="hll"><span class="go">mmc0 is current device</span>
</span><span class="go">=&gt; mmc info</span>
<span class="hll"><span class="go">Device: dwmmc@ff490000</span>
</span><span class="go">Manufacturer ID: b</span>
<span class="go">OEM: 5854</span>
<span class="hll"><span class="go">Name: XTSDA</span>
</span><span class="go">Timing Interface: Legacy</span>
<span class="go">Tran Speed: 52000000</span>
<span class="go">Rd Block Len: 512</span>
<span class="go">SD version 2.0</span>
<span class="go">High Capacity: No</span>
<span class="go">Capacity: 990 MiB</span>
<span class="go">Bus Width: 4-bit</span>
<span class="go">Erase Group Size: 512 Bytes</span>
<span class="go">=&gt;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><p class="rubric">Erasing SD NAND Using Special Utilities and USB Connection with PC</p>
<p>If the device fails to boot, e.g. due to a corrupted boot loader,
the only way to erase the SD NAND flash memory is to use a USB
connection with a PC and use special utilities. To do this, follow
<a class="reference external" href="https://wiki.radxa.com/RockpiS/dev/sdnand-install">these</a>
instructions from the official Radxa wiki page.</p>
</div></div>
</section>
<section id="serial-console">
<span id="sec-rock-pi-s-serial"></span><h3><span class="section-number">3.7.4 </span>Serial Console<a class="headerlink" href="#serial-console" title="Permalink to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default baudrate of ROCK Pi S is 1500000 (1.5 Mbps), please check
if your USB to TTL cable support 1.5 Mbps baudrate. Some model of CP210X
and PL2303x have baudrate limitation, please check the specified model.</p>
</div>
<p class="rubric">Connection</p>
<p>Connect the USB to TTL serial cable as described below. Don’t connect the VCC wire,
connect only TX, RX and GND wires.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 41%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Signal</p></th>
<th class="head" colspan="2"><p>ROCK Pi S Board</p></th>
</tr>
<tr class="row-even"><th class="head"><p>V1.0</p></th>
<th class="head"><p>V1.1 and later</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>RX</p></td>
<td><p>Pin 9</p></td>
<td><p>Pin 10</p></td>
</tr>
<tr class="row-even"><td><p>TX</p></td>
<td><p>Pin 11</p></td>
<td><p>Pin 8</p></td>
</tr>
<tr class="row-odd"><td><p>GND</p></td>
<td><p>Pin 25</p></td>
<td><p>Pin 6</p></td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="#fig-rock-pi-s-usb-to-ttl"><span class="std std-ref">USB to TTL Converter Connection to ROCK Pi S (V1.1 or later)</span></a> figure for example
connection USB to TTL converter with ROCK Pi S V1.1 or later.</p>
<figure class="align-default" id="id9">
<span id="fig-rock-pi-s-usb-to-ttl"></span><img alt="../../../../_images/rock-pi-s-usb-to-ttl.jpeg" class="with-border" src="../../../../_images/rock-pi-s-usb-to-ttl.jpeg" />
<figcaption>
<p><span class="caption-number">Fig. 3.4 </span><span class="caption-text">USB to TTL Converter Connection to ROCK Pi S (V1.1 or later)</span><a class="headerlink" href="#id9" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p class="rubric">Serial Setting on Host PC</p>
<p>The default serial setting for ROCK Pi S U-Boot and kernel console is:</p>
<ul class="simple">
<li><p>baudrate: 1500000</p></li>
<li><p>data bit: 8</p></li>
<li><p>stop bit: 1</p></li>
<li><p>parity: none</p></li>
<li><p>flow control: none</p></li>
</ul>
</section>
<section id="access-credentials">
<span id="sec-rock-pi-s-access-credentials"></span><h3><span class="section-number">3.7.5 </span>Access Credentials<a class="headerlink" href="#access-credentials" title="Permalink to this heading"></a></h3>
<p>The following credentials are used by default to access the system via
CLI (Command Line Interface), SSH (Secure SHell) or/and WebUI (Web User Interface):</p>
<ul class="simple">
<li><p>Username: <code class="docutils literal notranslate"><span class="pre">root</span></code></p></li>
<li><p>Password: <code class="docutils literal notranslate"><span class="pre">root</span></code></p></li>
</ul>
</section>
<section id="default-network-configuration">
<span id="sec-rock-pi-s-network-config"></span><h3><span class="section-number">3.7.6 </span>Default Network Configuration<a class="headerlink" href="#default-network-configuration" title="Permalink to this heading"></a></h3>
<p>By default Ethernet port (<code class="docutils literal notranslate"><span class="pre">eth0</span></code> interface) are joined into a bridge (<code class="docutils literal notranslate"><span class="pre">br-lan</span></code> interface).
Bridge (<code class="docutils literal notranslate"><span class="pre">br-lan</span></code>) configured to obtain IP configuration via <a class="reference internal" href="../../../../glossary.html#term-DHCP"><span class="xref std std-term">DHCP</span></a> client.
To see obtained IP configuration use the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[root@tanowrt ~]# </span>ifstatus lan <span class="p">|</span> jsonfilter -e <span class="s1">&#39;@[&quot;ipv4-address&quot;][0].address&#39;</span>
<span class="go">192.168.0.38</span>
</pre></div>
</div>
<p>In this example, the device got the IP address 192.168.0.38 via <a class="reference internal" href="../../../../glossary.html#term-DHCP"><span class="xref std std-term">DHCP</span></a>.</p>
<p>Also you can connect to the board using USB network connection (<code class="docutils literal notranslate"><span class="pre">usb0</span></code> interface).
USB network interface configured with static IP address 192.168.128.1 with enabled
<a class="reference internal" href="../../../../glossary.html#term-DHCP"><span class="xref std std-term">DHCP</span></a> server with pool with single IP address for client (your PC) 192.168.128.100.</p>
<p>WiFi module RTL8723DS currently is not supported in TanoWrt.</p>
</section>
<section id="webui">
<span id="sec-rock-pi-s-webui"></span><h3><span class="section-number">3.7.7 </span>WebUI<a class="headerlink" href="#webui" title="Permalink to this heading"></a></h3>
<p>The WebUI can be accessed via Ethernet port or USB network connection through HTTP(s) protocol.
You must see something like this in browser after you logged in:</p>
<figure class="align-default" id="id10">
<span id="fig-rock-pi-s-luci-login"></span><a class="reference internal image-reference" href="../../../../_images/luci-login.png"><img alt="../../../../_images/luci-login.png" src="../../../../_images/luci-login.png" style="width: 900px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.5 </span><span class="caption-text">LuCI WebUI Login Page</span><a class="headerlink" href="#id10" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id11">
<span id="fig-rock-pi-s-luci-status"></span><a class="reference internal image-reference" href="../../../../_images/luci-status2.png"><img alt="../../../../_images/luci-status2.png" src="../../../../_images/luci-status2.png" style="width: 900px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.6 </span><span class="caption-text">LuCI WebUI Overview Page</span><a class="headerlink" href="#id11" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="upgrade-running-system">
<span id="sec-rock-pi-s-upgrade"></span><h2><span class="section-number">3.8 </span>Upgrade Running System<a class="headerlink" href="#upgrade-running-system" title="Permalink to this heading"></a></h2>
<p>You can upgrade the running system via CLI (Command Line Interface) or WebUI (Web User Interface).</p>
<section id="cli-command-line-interface">
<h3><span class="section-number">3.8.1 </span>CLI (Command Line Interface)<a class="headerlink" href="#cli-command-line-interface" title="Permalink to this heading"></a></h3>
<p>Use the following commands to upgrade the firmware using the command line:</p>
<ul>
<li><p>Upgrade from a local file (e.g. on an SD card):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[root@tanowrt ~]# </span>swupdate-client /mnt/mmcblk1/&lt;image-recipe&gt;-swu-&lt;MACHINE&gt;.swu
</pre></div>
</div>
</li>
<li><p>Upgrade from a file hosted on a remote HTTP server:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[root@tanowrt ~]# </span>wget -O- http://remote.server.com/path/to/&lt;image-recipe&gt;-swu-&lt;MACHINE&gt;.swu <span class="p">|</span> swupdate-client
</pre></div>
</div>
</li>
</ul>
</section>
<section id="webui-web-user-interface">
<h3><span class="section-number">3.8.2 </span>WebUI (Web User Interface)<a class="headerlink" href="#webui-web-user-interface" title="Permalink to this heading"></a></h3>
<p>To upgrade the firmware using the web interface,
choose <span class="menuselection">System ‣ Firmware Upgrade</span> in the main menu.
Next, follow the instructions on the page.</p>
<figure class="align-default" id="id12">
<span id="fig-rock-pi-s-luci-swupdate"></span><a class="reference internal image-reference" href="../../../../_images/luci-swupdate.png"><img alt="../../../../_images/luci-swupdate.png" src="../../../../_images/luci-swupdate.png" style="width: 900px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.7 </span><span class="caption-text">LuCI WebUI Firmware Upgrade Page</span><a class="headerlink" href="#id12" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="additional-information">
<h2><span class="section-number">3.9 </span>Additional Information<a class="headerlink" href="#additional-information" title="Permalink to this heading"></a></h2>
<p>Here are sections with various additional information about the
Radxa ROCK Pi S board and the operation of TanoWrt on it.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="bootlog-u-boot.html">3.9.1 ROCK Pi S U-Boot Boot Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="bootlog-kernel.html">3.9.2 ROCK Pi S Linux Boot Log</a></li>
</ul>
</div>
</section>
<section id="references">
<h2><span class="section-number">3.10 </span>References<a class="headerlink" href="#references" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>ROCK Pi S (<a class="reference external" href="https://wiki.radxa.com/RockpiS">https://wiki.radxa.com/RockpiS</a>)</p></li>
<li><p>GPIO Pinout for ROCK Pi S (<a class="reference external" href="https://wiki.radxa.com/RockpiS/hardware/gpio">https://wiki.radxa.com/RockpiS/hardware/gpio</a>)</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer>
  <hr/>
  <div role="contentinfo">
    <p>
      &copy; Copyright 2022, Tano Systems LLC | Last updated on 22.07.2022
    </p>
  </div>
</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>